<div class="card">
	<p-toolbar styleClass="p-mb-4">
		<ng-template pTemplate="left">
			<button
				pButton
				pRipple
				label="New"
				icon="pi pi-plus"
				class="p-button-success p-mr-2"
				(click)="openNew()"></button>
		</ng-template>
	</p-toolbar>

	<p-table
		dataKey="id"
		currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
		[value]="countries"
		[rows]="20"
		[paginator]="true"
		[rowHover]="true"
		[(selection)]="selectedItems"
		[showCurrentPageReport]="true">
		<ng-template pTemplate="caption">
			<div class="p-d-flex p-ai-center p-jc-between">
				<h5 class="p-m-0">Quốc gia</h5>
			</div>
		</ng-template>
		<ng-template pTemplate="header">
			<tr>
				<th style="width: 3rem">
					<p-tableHeaderCheckbox></p-tableHeaderCheckbox>
				</th>
				<th *ngFor="let col of cols">
					{{ col.header }}
				</th>
				<th></th>
			</tr>
		</ng-template>
		<ng-template pTemplate="body" let-item>
			<tr>
				<td>
					<p-tableCheckbox [value]="item"></p-tableCheckbox>
				</td>
				<td>{{ item.countryName }}</td>
				<td>{{ item.countryCode }}</td>
				<td>{{ item.created | date: 'dd/MM/yyyy' }}</td>

				<td>
					<button
						pButton
						pRipple
						icon="pi pi-pencil"
						class="p-button-rounded p-button-success p-mr-2"
						(click)="openEdit(item)"></button>
					<button
						pButton
						pRipple
						icon="pi pi-trash"
						class="p-button-rounded p-button-warning"
						(click)="deleteCountry(item)"></button>
				</td>
			</tr>
		</ng-template>
	</p-table>
</div>

<p-dialog
	[(visible)]="dialog"
	[style]="{ width: '800px' }"
	[header]="editMode ? 'Chỉnh sửa quốc gia' : 'Thêm quốc gia'"
	[modal]="true"
	styleClass="p-fluid">
	<ng-template pTemplate="content">
		<form [formGroup]="form" (ngSubmit)="onSubmit()">
			<div class="form-group">
				<label class="control-label">Tên quốc gia</label>
				<input formControlName="countryName" id="countryName" type="text" class="form-control" />
				<span
					*ngIf="(countryName.touched || submitted) && countryName.errors?.required"
					id="countryName"
					class="error invalid-feedback"
					style="display: block">
					Xin hãy nhập tên Tên quốc gia
				</span>

				<span
					*ngIf="(countryName.touched || submitted) && countryName.errors?.maxlength"
					id="countryName"
					class="error invalid-feedback"
					style="display: block">
					Tên quốc gia chỉ được tối đa 450 ký tự
				</span>
			</div>

			<div class="form-group">
				<label class="control-label">Mã quốc gia</label>
				<input [readonly]="editMode" formControlName="countryCode" id="countryCode" type="text"
					class="form-control" />
				<span
					*ngIf="(countryCode.touched || submitted) && countryCode.errors?.required"
					id="countryCode"
					class="error invalid-feedback"
					style="display: block">
					Xin hãy nhập Mã quốc gia
				</span>
			</div>

			<div class="form-group">
				<button type="submit" class="btn btn-success" [disabled]="form.invalid">Xác nhận</button>
			</div>
		</form>
	</ng-template>
</p-dialog>
